# Managed by Chef for node <%= node['fqdn'] -%>.

# TIMEZONE (dynamic)
my $zone = "UTC";
$zone=`/bin/cat /etc/timezone`
    if -f "/etc/timezone";
chomp $zone;
Set($Timezone, $zone);

# BASICS
Set($rtname, '<% node['rt4']['server_name'] -%>'');
Set($Organization, '<% node['rt4']['org'] -%>');
Set($CorrespondAddress , '<% node['rt4']['correspond_addr'] -%>');
Set($CommentAddress , '<% node['rt4']['comment_addr'] -%>');

# WEBSERVER
Set($WebPath , "/rt");
Set($WebBaseURL , "http://<% node['rt4']['server_name'] -%>");

# DATABASE
my %typemap = (
    mysql   => 'mysql',
    postgresql   => 'Pg',
);
Set($DatabaseType, $typemap{<% node['rt4']['db_server'] -%>} || "UNKNOWN");
Set($DatabaseHost, '<% node['rt4]['db_host'] -%>');
Set($DatabasePort, '<% node['rt4]['db_port'] -%>');
Set($DatabaseUser , '<% node['rt4]['db_user'] -%>');
Set($DatabasePassword , '<% node['rt4]['db_password'] -%>');

1;
